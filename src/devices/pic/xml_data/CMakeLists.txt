include_directories(${CMAKE_CURRENT_SOURCE_DIR})

FILE(GLOB DEVICE_XML_DEPEND RELATIVE "${CMAKE_CURRENT_SOURCE_DIR}" "${CMAKE_CURRENT_SOURCE_DIR}/*.xml")
FILE(GLOB REGISTER_XML_DEPEND RELATIVE "${CMAKE_CURRENT_SOURCE_DIR}" "${CMAKE_CURRENT_SOURCE_DIR}/registers/*.xml")
ADD_CUSTOM_COMMAND(
   OUTPUT  ${CMAKE_CURRENT_SOURCE_DIR}/pic_data.cpp
   COMMAND ${CMAKE_CURRENT_BINARY_DIR}/../xml/pic_xml_to_data ${CMAKE_CURRENT_SOURCE_DIR}
   DEPENDS ${CMAKE_CURRENT_BINARY_DIR}/../xml/pic_xml_to_data ${DEVICE_XML_DEPEND} ${REGISTER_XML_DEPEND}
)

SET(picxml_STAT_SRCS
   pic_data.cpp
)
add_library(picxml STATIC ${picxml_STAT_SRCS})
